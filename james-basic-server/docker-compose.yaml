version: '3'
services:

  james:
    build:
      context: ..
      dockerfile: james-basic-server/Dockerfile
    image: james-basic-server
    volumes:
      - ./conf:/opt/apache-james/james-basic-server/conf/
      - ./logs:/opt/apache-james/james-basic-server/logs/
    environment:
      - JAVA_OPTS=
        -Dlogback.configurationFile="/opt/apache-james/james-basic-server/conf/logback.xml" 
        -Dworking.directory="/opt/apache-james/james-basic-server"
    ports:
      - "9465:465"
      - "9993:993"
      - "8000:8000"

  james-cli:
    build:
      context: ..
      dockerfile: james-cli/Dockerfile
    image: james-cli
    ports:
      - "9999:9999"
